import Day20.parse
import Day20.run1
import Day20.run2
import arrow.core.MemoizedDeepRecursiveFunction
import kotlin.Int

object Day20 {
    fun parse(input: String) = Grid.parseCharGrid(input)

    fun dropOneWall(grid: Grid<Char>): List<Grid<Char>> =
        grid.findAll('#')
            .filter { c ->
                grid.neighbours(c).mapNotNull { grid.getSafe(it) }.count { it != '#'} >= 2
//                (c.x > 0 && c.y > 0 && c.x < grid.width() - 1 && c.y < grid.height() - 1) && (
//
//                )
            }
            .map { c ->
                grid.set(c, '.')
            }

    data class Cheat(val c: Coordinate<Int>, val less: Int)
    fun findCheat(grid: Grid<Int?>, c: Coordinate<Int>): List<Cheat> {
        val from = grid.get(c)!!
        return Coordinate.straightDirections.mapNotNull {
            val toC = c + it * 2
            grid.getSafe(toC)?.let { it - from - 2 }?.let { safe ->
                if (safe > 0) Cheat(toC, safe) else null
            }
        }
    }

    fun run1(input: Grid<Char>, saveAtLeast: Int): Int {
        val path = aStar(Maze(input))!!
        val numberedPath = path.foldIndexed(Grid.init<Int?>(input.width(), input.height(), null)) { i, g, e ->
            g.set(e, i)
        }
        val cheats = path.toList().flatMap { findCheat(numberedPath, it) }
        return cheats.count { it.less >= saveAtLeast }
    }

    fun run2(input: Grid<Char>): Int = 0
}

fun main() {
    val input = """
        #############################################################################################################################################
        #.............#...#.....#...#.......###...#.....#...#...#.....#...#.......#.............#...#...#...#.....#.......#...#.........#...#.......#
        #.###########.#.#.#.###.#.#.#.#####.###.#.#.###.#.#.#.#.#.###.#.#.#.#####.#.###########.#.#.#.#.#.#.#.###.#.#####.#.#.#.#######.#.#.#.#####.#
        #...........#.#.#.#...#.#.#.#.#.....#...#.#...#.#.#.#.#.#...#.#.#.#.....#.#.........#...#.#.#.#.#.#.#...#...#.....#.#.#.#.......#.#...#...#.#
        ###########.#.#.#.###.#.#.#.#.#.#####.###.###.#.#.#.#.#.###.#.#.#.#####.#.#########.#.###.#.#.#.#.#.###.#####.#####.#.#.#.#######.#####.#.#.#
        #...###...#.#...#.#...#...#...#.....#...#.###.#.#.#.#.#.###.#...#...###.#.###...#...#.###.#...#...#.###.#...#.#...#.#...#.........#.....#...#
        #.#.###.#.#.#####.#.###############.###.#.###.#.#.#.#.#.###.#######.###.#.###.#.#.###.###.#########.###.#.#.#.#.#.#.###############.#########
        #.#.#...#.#.....#.#.#...#.......#...#...#.....#...#.#.#...#.#.....#.....#...#.#.#...#...#...#.....#.#...#.#...#.#.#.#...............#.....###
        #.#.#.###.#####.#.#.#.#.#.#####.#.###.#############.#.###.#.#.###.#########.#.#.###.###.###.#.###.#.#.###.#####.#.#.#.###############.###.###
        #.#.#...#.#...#.#.#...#.#.....#...###...........#...#...#.#.#...#...#.....#.#.#.....#...###.#...#...#...#.#...#.#.#.#.........#...###...#...#
        #.#.###.#.#.#.#.#.#####.#####.#################.#.#####.#.#.###.###.#.###.#.#.#######.#####.###.#######.#.#.#.#.#.#.#########.#.#.#####.###.#
        #.#.....#.#.#.#.#.......#.....#.....###...#...#.#...#...#.#...#.###...###.#.#.......#.#...#.#...###...#.#.#.#.#.#.#.#.........#.#...###...#.#
        #.#######.#.#.#.#########.#####.###.###.#.#.#.#.###.#.###.###.#.#########.#.#######.#.#.#.#.#.#####.#.#.#.#.#.#.#.#.#.#########.###.#####.#.#
        #.......#.#.#.#.........#.....#.#...#...#.#.#...#...#...#.###...#.........#...###...#...#...#.....#.#...#...#...#...#...#...###...#...#...#.#
        #######.#.#.#.#########.#####.#.#.###.###.#.#####.#####.#.#######.###########.###.###############.#.###################.#.#.#####.###.#.###.#
        #.......#...#.#...#...#.#.....#.#.#...#...#.....#.....#.#...#...#...........#...#.#...............#.#...................#.#.#...#...#...#...#
        #.###########.#.#.#.#.#.#.#####.#.#.###.#######.#####.#.###.#.#.###########.###.#.#.###############.#.###################.#.#.#.###.#####.###
        #...........#.#.#...#...#.#...#.#.#...#.#.....#...#...#.#...#.#...#...#...#.#...#.#.#...#...#...###.#...#...#...#.....#...#...#...#.#.....###
        ###########.#.#.#########.#.#.#.#.###.#.#.###.###.#.###.#.###.###.#.#.#.#.#.#.###.#.#.#.#.#.#.#.###.###.#.#.#.#.#.###.#.#########.#.#.#######
        #.....#...#.#.#...#.......#.#.#.#.#...#.#.#...###.#.....#.#...#...#.#...#.#.#.....#.#.#...#...#.#...#...#.#...#.#.#...#.....#.....#.#.......#
        #.###.#.#.#.#.###.#.#######.#.#.#.#.###.#.#.#####.#######.#.###.###.#####.#.#######.#.#########.#.###.###.#####.#.#.#######.#.#####.#######.#
        #...#.#.#...#.###.#.....###.#.#.#.#...#.#.#.#...#...#.....#...#...#...#...#.#.....#...#.....#...#...#.....#.....#.#.###.....#.....#.#.......#
        ###.#.#.#####.###.#####.###.#.#.#.###.#.#.#.#.#.###.#.#######.###.###.#.###.#.###.#####.###.#.#####.#######.#####.#.###.#########.#.#.#######
        #...#...#...#...#.#.....#...#.#.#...#.#...#...#...#.#.......#.#...###.#...#...#...#.....###.#.#...#.#.......#.....#...#.....#.....#.#...#...#
        #.#######.#.###.#.#.#####.###.#.###.#.###########.#.#######.#.#.#####.###.#####.###.#######.#.#.#.#.#.#######.#######.#####.#.#####.###.#.#.#
        #...#...#.#...#...#.#...#...#.#.#...#...........#.#...#.....#.#.#...#...#...#...#...#.....#...#.#.#.#.......#.....#...#...#.#...###.#...#.#.#
        ###.#.#.#.###.#####.#.#.###.#.#.#.#############.#.###.#.#####.#.#.#.###.###.#.###.###.###.#####.#.#.#######.#####.#.###.#.#.###.###.#.###.#.#
        #...#.#.#.#...#...#...#.....#...#.###...###...#.#...#.#.#...#.#.#.#...#...#...#...#...#...###...#...#.......#...#.#...#.#.#...#...#.#...#.#.#
        #.###.#.#.#.###.#.###############.###.#.###.#.#.###.#.#.#.#.#.#.#.###.###.#####.###.###.#####.#######.#######.#.#.###.#.#.###.###.#.###.#.#.#
        #...#.#...#...#.#.....#...#...#...#...#...#.#.#...#...#...#.#.#.#.#...###.....#.....#...#...#.......#.#...###.#.#...#...#...#.#...#.#...#.#.#
        ###.#.#######.#.#####.#.#.#.#.#.###.#####.#.#.###.#########.#.#.#.#.#########.#######.###.#.#######.#.#.#.###.#.###.#######.#.#.###.#.###.#.#
        ###...#...###...#...#...#...#.#.###.....#...#.#...#...#.....#.#.#.#.......###...#.....#...#...#...#.#.#.#.#...#.....#.......#.#.....#.....#.#
        #######.#.#######.#.#########.#.#######.#####.#.###.#.#.#####.#.#.#######.#####.#.#####.#####.#.#.#.#.#.#.#.#########.#######.#############.#
        ###.....#.........#...........#...#...#.#.....#.....#.#.#...#.#.#...#.....#...#.#.#...#...#...#.#.#.#.#.#.#...#.......#.....#.#.............#
        ###.#############################.#.#.#.#.###########.#.#.#.#.#.###.#.#####.#.#.#.#.#.###.#.###.#.#.#.#.#.###.#.#######.###.#.#.#############
        #...#...........................#.#.#.#.#...#.....#...#.#.#...#.#...#.#...#.#...#.#.#...#.#...#.#.#.#...#...#.#.#...###.#...#.#.....#...#...#
        #.###.#########################.#.#.#.#.###.#.###.#.###.#.#####.#.###.#.#.#.#####.#.###.#.###.#.#.#.#######.#.#.#.#.###.#.###.#####.#.#.#.#.#
        #.....###...#...................#...#...#...#...#.#.#...#.#...#.#.#...#.#.#...#...#...#.#...#.#.#...#.......#.#...#.....#...#.#...#...#...#.#
        #########.#.#.###########################.#####.#.#.#.###.#.#.#.#.#.###.#.###.#.#####.#.###.#.#.#####.#######.#############.#.#.#.#########.#
        #.........#...#.....#...#...............#.#...#.#...#...#...#.#.#.#...#.#.#...#...#...#.#...#.#.#.....#...#...#.....#.....#...#.#.........#.#
        #.#############.###.#.#.#.#############.#.#.#.#.#######.#####.#.#.###.#.#.#.#####.#.###.#.###.#.#.#####.#.#.###.###.#.###.#####.#########.#.#
        #.......#.......###...#...#.......#.....#...#...#.......#.....#.#...#.#.#.#...#...#...#.#.###.#.#...#...#.#.#...###...###.#...#.....#...#...#
        #######.#.#################.#####.#.#############.#######.#####.###.#.#.#.###.#.#####.#.#.###.#.###.#.###.#.#.###########.#.#.#####.#.#.#####
        #.......#.#.......#...#.....#...#...#.....###...#.......#.#...#.....#.#.#.#...#...#...#.#...#...###...#...#.#.###.......#...#.......#.#.....#
        #.#######.#.#####.#.#.#.#####.#.#####.###.###.#.#######.#.#.#.#######.#.#.#.#####.#.###.###.###########.###.#.###.#####.#############.#####.#
        #.#...#...#.....#...#.#.......#.......#...#...#.........#...#.....###...#.#.....#.#...#...#.....###...#.....#...#.#.....###...#.......#.....#
        #.#.#.#.#######.#####.#################.###.#####################.#######.#####.#.###.###.#####.###.#.#########.#.#.#######.#.#.#######.#####
        #...#...#...###.....#.#.................###.....#...#...#...#...#.....#...#...#.#.#...#...#.....#...#...........#.#.........#...#.....#.....#
        #########.#.#######.#.#.#######################.#.#.#.#.#.#.#.#.#####.#.###.#.#.#.#.###.###.#####.###############.###############.###.#####.#
        #.....#...#...#.....#.#.......#...............#.#.#.#.#.#.#.#.#...#...#.....#...#.#...#...#.....#.................#...........#...###.......#
        #.###.#.#####.#.#####.#######.#.#############.#.#.#.#.#.#.#.#.###.#.#############.###.###.#####.###################.#########.#.#############
        #...#.#.....#.#.....#.........#.#.......#...#.#...#.#.#.#.#.#.###.#...........#...#...#...#.....#...........#.....#.........#.#.#...........#
        ###.#.#####.#.#####.###########.#.#####.#.#.#.#####.#.#.#.#.#.###.###########.#.###.###.###.#####.#########.#.###.#########.#.#.#.#########.#
        #...#.#.....#.....#.....#...#...#.....#.#.#.#.....#.#.#.#.#.#.#...#...#...#...#...#...#.#...#.....#...#...#...###...#...#...#...#.#.........#
        #.###.#.#########.#####.#.#.#.#######.#.#.#.#####.#.#.#.#.#.#.#.###.#.#.#.#.#####.###.#.#.###.#####.#.#.#.#########.#.#.#.#######.#.#########
        #.#...#.#...#...#.......#.#...#.......#...#...#...#.#.#.#.#...#...#.#.#.#.#.....#.#...#.#.###...#...#...#.........#.#.#.#...#.....#.........#
        #.#.###.#.#.#.#.#########.#####.#############.#.###.#.#.#.#######.#.#.#.#.#####.#.#.###.#.#####.#.###############.#.#.#.###.#.#############.#
        #.#.###...#...#...........#...#.........#...#...###.#.#.#...#...#.#.#.#.#.....#.#...###.#...###...#...............#...#...#...#...#...#...#.#
        #.#.#######################.#.#########.#.#.#######.#.#.###.#.#.#.#.#.#.#####.#.#######.###.#######.#####################.#####.#.#.#.#.#.#.#
        #.#.....#####...............#.#...#.....#.#.......#.#.#.#...#.#...#.#.#.#...#.#.#.....#.#...#.....#...................#...#.....#...#...#.#.#
        #.#####.#####.###############.#.#.#.#####.#######.#.#.#.#.###.#####.#.#.#.#.#.#.#.###.#.#.###.###.###################.#.###.#############.#.#
        #.#...#...#...#.........#...#...#...###...#.......#...#.#.#...#...#.#.#...#.#...#...#.#...###...#.....................#...#.............#.#.#
        #.#.#.###.#.###.#######.#.#.###########.###.###########.#.#.###.#.#.#.#####.#######.#.#########.#########################.#############.#.#.#
        #.#.#...#.#.....#.....#.#.#...........#.#...###.......#...#.....#.#.#.#...#...#.....#.......###...............#.........#.#...#...#...#.#.#.#
        #.#.###.#.#######.###.#.#.###########.#.#.#####.#####.###########.#.#.#.#.###.#.###########.#################.#.#######.#.#.#.#.#.#.#.#.#.#.#
        #...###.#.......#...#.#.#.#...........#.#.#...#...#...#...###...#...#.#.#.#...#...........#.#...#...........#...#.......#.#.#...#...#...#...#
        #######.#######.###.#.#.#.#.###########.#.#.#.###.#.###.#.###.#.#####.#.#.#.#############.#.#.#.#.#########.#####.#######.#.#################
        #.....#.......#.....#.#.#.#.............#...#...#.#.###.#.....#.....#...#.#...#...........#.#.#.#.........#.......#...###...#.........#...###
        #.###.#######.#######.#.#.#####################.#.#.###.###########.#####.###.#.###########.#.#.#########.#########.#.#######.#######.#.#.###
        #...#.......#.....#...#...#.....#.............#...#.....#.....#...#...#...#...#...........#.#.#.#...#...#...........#.......#.#.......#.#...#
        ###.#######.#####.#.#######.###.#.###########.###########.###.#.#.###.#.###.#############.#.#.#.#.#.#.#.###################.#.#.#######.###.#
        ###.......#...#...#.###...#...#.#.......#...#.............###...#.....#.....###...#.......#...#...#...#...........#...#...#...#.......#.#...#
        #########.###.#.###.###.#.###.#.#######.#.#.###################################.#.#.#############################.#.#.#.#.###########.#.#.###
        #.........#...#...#.....#.....#.........#.#.#...#...#...###...#...#...###.......#...#.....#...#.................#.#.#...#.#...........#.#.###
        #.#########.#####.#######################.#.#.#.#.#.#.#.###.#.#.#.#.#.###.###########.###.#.#.#.###############.#.#.#####.#.###########.#.###
        #.#.......#.#####.........................#...#.#.#...#.....#...#...#...#...#...#...#.#...#.#.#.#...............#.#.....#...#.....#...#.#...#
        #.#.#####.#.###################################.#.#####################.###.#.#.#.#.#.#.###.#.#.#.###############.#####.#####.###.#.#.#.###.#
        #...#.....#...#...#........S###################...#####E#...............#...#.#...#...#.....#...#...#...........#.......#...#.#...#.#.#.#...#
        #####.#######.#.#.#.###################################.#.###############.###.#####################.#.#########.#########.#.#.#.###.#.#.#.###
        #.....#.....#...#...#.....#...#.....#...#...###########...#.......###...#...#.###...#...............#.#.........#.......#.#.#.#.....#...#...#
        #.#####.###.#########.###.#.#.#.###.#.#.#.#.###############.#####.###.#.###.#.###.#.#.###############.#.#########.#####.#.#.#.#############.#
        #.....#.###...#.....#.#...#.#.#.#...#.#...#.....#########...#...#...#.#...#.#.#...#.#.......#.....#...#...###...#.#.....#.#.#.#...........#.#
        #####.#.#####.#.###.#.#.###.#.#.#.###.#########.#########.###.#.###.#.###.#.#.#.###.#######.#.###.#.#####.###.#.#.#.#####.#.#.#.#########.#.#
        #...#...#.....#...#...#.....#...#.....#.....#...#########.#...#.....#.#...#...#...#.###...#...###...#...#.....#.#.#.#...#.#.#.#.#...#...#...#
        #.#.#####.#######.#####################.###.#.###########.#.#########.#.#########.#.###.#.###########.#.#######.#.#.#.#.#.#.#.#.#.#.#.#.#####
        #.#.#...#.........#.....#.....#.........###...#.....#.....#.....#...#.#...###...#.#.....#.....#...#...#.........#.#...#...#...#...#...#.....#
        #.#.#.#.###########.###.#.###.#.###############.###.#.#########.#.#.#.###.###.#.#.###########.#.#.#.#############.#########################.#
        #.#...#.#...###...#.#...#...#.#.........#.....#.#...#.....#.....#.#.#...#...#.#.#...#.......#.#.#...#.............#.............#.....#.....#
        #.#####.#.#.###.#.#.#.#####.#.#########.#.###.#.#.#######.#.#####.#.###.###.#.#.###.#.#####.#.#.#####.#############.###########.#.###.#.#####
        #.....#...#.#...#...#.......#...###.....#...#...#.#...#...#.......#.###.#...#.#...#...#...#.#.#.....#.###...#.......#...#.....#.#...#.#.....#
        #####.#####.#.#################.###.#######.#####.#.#.#.###########.###.#.###.###.#####.#.#.#.#####.#.###.#.#.#######.#.#.###.#.###.#.#####.#
        #.....#...#...#...#...#.......#.#...#.....#.#...#...#.#...#.........#...#.#...#...#...#.#.#.#...###...#...#...#.......#...#...#.....#.#.....#
        #.#####.#.#####.#.#.#.#.#####.#.#.###.###.#.#.#.#####.###.#.#########.###.#.###.###.#.#.#.#.###.#######.#######.###########.#########.#.#####
        #.....#.#.#.....#.#.#...#.....#.#.....#...#.#.#.......#...#...###...#.#...#...#...#.#.#.#.#.#...#...###.........#.........#.....#...#.#.....#
        #####.#.#.#.#####.#.#####.#####.#######.###.#.#########.#####.###.#.#.#.#####.###.#.#.#.#.#.#.###.#.#############.#######.#####.#.#.#.#####.#
        #...#...#...#.....#.#.....#...#.......#.#...#.#...#...#.....#.#...#...#...#...#...#.#...#.#.#.....#.#.........#...#.....#.......#.#.#.......#
        #.#.#########.#####.#.#####.#.#######.#.#.###.#.#.#.#.#####.#.#.#########.#.###.###.#####.#.#######.#.#######.#.###.###.#########.#.#########
        #.#.........#.......#.......#...#...#...#...#...#.#.#...#...#...#.........#.#...###.....#.#.....#...#.#.....#...#...#...###.......#...#...###
        #.#########.###################.#.#.#######.#####.#.###.#.#######.#########.#.#########.#.#####.#.###.#.###.#####.###.#####.#########.#.#.###
        #...#.....#...#...#...........#...#.....###.#.....#.#...#.#.....#.#...#.....#.#.......#.#.#.....#.###...#...#...#...#.....#.#.........#.#...#
        ###.#.###.###.#.#.#.#########.#########.###.#.#####.#.###.#.###.#.#.#.#.#####.#.#####.#.#.#.#####.#######.###.#.###.#####.#.#.#########.###.#
        ###...#...#...#.#.#.........#...........#...#.....#.#...#...#...#...#.#.....#.#.#.....#.#.#.....#.....#...###.#.....#...#...#.#...#...#.#...#
        #######.###.###.#.#########.#############.#######.#.###.#####.#######.#####.#.#.#.#####.#.#####.#####.#.#####.#######.#.#####.#.#.#.#.#.#.###
        #.....#...#.....#...#...###.........#...#...#.....#.#...#...#...#.....#...#.#.#.#.#...#.#.#...#.#.....#.......#.......#.#...#...#...#...#...#
        #.###.###.#########.#.#.###########.#.#.###.#.#####.#.###.#.###.#.#####.#.#.#.#.#.#.#.#.#.#.#.#.#.#############.#######.#.#.###############.#
        #...#.###.........#.#.#.....#.......#.#.#...#...#...#...#.#...#.#.....#.#.#.#.#.#.#.#.#.#.#.#.#.#.#...#...#...#.......#...#.....#.....#.....#
        ###.#.###########.#.#.#####.#.#######.#.#.#####.#.#####.#.###.#.#####.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#######.#########.#.###.#.#####
        #...#.............#...#.....#.......#.#.#...###.#.#####.#.#...#...#...#.#.#.#.#.#...#...#.#.#.#.#.#.#.#.#.#.#.#.......#.......#.#.#...#.....#
        #.#####################.###########.#.#.###.###.#.#####.#.#.#####.#.###.#.#.#.#.#########.#.#.#.#.#.#.#.#.#.#.#.#######.#####.#.#.#.#######.#
        #...#...........#...#...#...###.....#.#.#...#...#...#...#.#.#...#.#.#...#...#.#.....#.....#.#.#.#.#.#.#.#.#.#.#...#...#...#...#...#...#.....#
        ###.#.#########.#.#.#.###.#.###.#####.#.#.###.#####.#.###.#.#.#.#.#.#.#######.#####.#.#####.#.#.#.#.#.#.#.#.#.###.#.#.###.#.#########.#.#####
        ###...#.....###...#.#.....#.....#...#.#...###.....#.#...#.#...#...#.#.......#...#...#...#...#...#.#.#.#.#.#.#...#...#.....#.......#...#.....#
        #######.###.#######.#############.#.#.###########.#.###.#.#########.#######.###.#.#####.#.#######.#.#.#.#.#.###.#################.#.#######.#
        ###...#...#.......#...#.....#...#.#.#.....#.......#...#.#.....#.....#.......###.#...#...#...#.....#.#...#.#...#...#.....#.......#.#...#...#.#
        ###.#.###.#######.###.#.###.#.#.#.#.#####.#.#########.#.#####.#.#####.#########.###.#.#####.#.#####.#####.###.###.#.###.#.#####.#.###.#.#.#.#
        #...#...#.......#.###.#.###...#.#.#.#.....#.........#.#.#...#.#.#...#.........#.#...#...#...#.....#.....#.#...#...#...#.#...###...###.#.#...#
        #.#####.#######.#.###.#.#######.#.#.#.#############.#.#.#.#.#.#.#.#.#########.#.#.#####.#.#######.#####.#.#.###.#####.#.###.#########.#.#####
        #...#...#.....#.#.....#.#.....#.#.#.#.......#.......#.#.#.#.#.#.#.#.#.....#...#.#...#...#.....#...#...#.#.#.#...#...#.#.#...#...#...#.#.#...#
        ###.#.###.###.#.#######.#.###.#.#.#.#######.#.#######.#.#.#.#.#.#.#.#.###.#.###.###.#.#######.#.###.#.#.#.#.#.###.#.#.#.#.###.#.#.#.#.#.#.#.#
        #...#...#...#.#.....#...#...#...#.#.#.......#...#.....#.#.#.#.#.#.#.#.#...#...#...#.#.#...#...#.#...#.#.#...#...#.#.#.#.#.....#...#.#.#...#.#
        #.#####.###.#.#####.#.#####.#####.#.#.#########.#.#####.#.#.#.#.#.#.#.#.#####.###.#.#.#.#.#.###.#.###.#.#######.#.#.#.#.###########.#.#####.#
        #.#...#.....#.......#...###.....#.#.#...###.....#.#.....#.#.#.#.#.#.#.#.#.....#...#.#.#.#.#.###.#...#.#...#...#.#.#.#.#.....#.......#.....#.#
        #.#.#.#################.#######.#.#.###.###.#####.#.#####.#.#.#.#.#.#.#.#.#####.###.#.#.#.#.###.###.#.###.#.#.#.#.#.#.#####.#.###########.#.#
        #.#.#...#...#.........#...#.....#.#...#...#.#...#.#.#...#.#.#.#.#.#.#.#.#.....#...#.#...#.#...#.#...#.#...#.#.#.#.#.#.#.....#...........#.#.#
        #.#.###.#.#.#.#######.###.#.#####.###.###.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#.#####.###.#.#####.###.#.#.###.#.###.#.#.#.#.#.#.###############.#.#.#
        #.#.#...#.#.#.#.......#...#.#...#.#...#...#.#.#...#.#.#.#.#.#.#.#.#.#.#.......###...#...#.#...#...###.#.....#.#...#.#.#...#...#.......#.#.#.#
        #.#.#.###.#.#.#.#######.###.#.#.#.#.###.###.#.#####.#.#.#.#.#.#.#.#.#.###############.#.#.#.#########.#######.#####.#.###.#.#.#.#####.#.#.#.#
        #.#.#.....#.#.#.#.....#...#...#...#.#...###.#.#.....#.#...#.#.#.#.#.#...#...###.......#...#.###.....#...#...#.....#.#.###.#.#.#...###...#...#
        #.#.#######.#.#.#.###.###.#########.#.#####.#.#.#####.#####.#.#.#.#.###.#.#.###.###########.###.###.###.#.#.#####.#.#.###.#.#.###.###########
        #.#.###...#.#.#.#...#...#.......#...#.....#...#.#...#.#.....#.#.#.#...#...#...#.......#...#...#...#...#.#.#.#...#.#.#.#...#.#...#...###...###
        #.#.###.#.#.#.#.###.###.#######.#.#######.#####.#.#.#.#.#####.#.#.###.#######.#######.#.#.###.###.###.#.#.#.#.#.#.#.#.#.###.###.###.###.#.###
        #.#.#...#...#.#...#.#...#...#...#.....#...###...#.#...#.#.....#...#...#...#...###.....#.#...#.....#...#.#.#...#.#.#...#.#...###...#.....#...#
        #.#.#.#######.###.#.#.###.#.#.#######.#.#####.###.#####.#.#########.###.#.#.#####.#####.###.#######.###.#.#####.#.#####.#.#######.#########.#
        #.#.#.......#...#...#.#...#.#.....#...#.....#...#.#.....#.......#...#...#.#.....#.#...#...#.#...#...#...#.....#.#...###.#.....#...#.....#...#
        #.#.#######.###.#####.#.###.#####.#.#######.###.#.#.###########.#.###.###.#####.#.#.#.###.#.#.#.#.###.#######.#.###.###.#####.#.###.###.#.###
        #.#.###.....#...#.....#...#.#...#.#...#.....###.#.#.....#.....#.#...#.#...#...#.#.#.#.....#.#.#.#.###...#.....#...#...#...#...#...#...#.#.###
        #.#.###.#####.###.#######.#.#.#.#.###.#.#######.#.#####.#.###.#.###.#.#.###.#.#.#.#.#######.#.#.#.#####.#.#######.###.###.#.#####.###.#.#.###
        #.#.#...#...#...#...#...#.#.#.#.#.#...#.....#...#.....#.#...#.#...#.#.#.#...#.#.#.#.#.......#.#.#.....#.#.......#...#...#.#.....#...#.#.#...#
        #.#.#.###.#.###.###.#.#.#.#.#.#.#.#.#######.#.#######.#.###.#.###.#.#.#.#.###.#.#.#.#.#######.#.#####.#.#######.###.###.#.#####.###.#.#.###.#
        #...#.....#.....###...#...#...#...#.........#.........#.....#.....#...#...###...#...#.........#.......#.........###.....#.......###...#.....#
        #############################################################################################################################################
    """.trimIndent()
    val parsed = parse(input)
    println(run1(parsed, 100))
    println(run2(parsed))
}
